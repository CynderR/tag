(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{215:function(t,e,n){"use strict";n.r(e);n(23),n(27),n(212);var o=n(214),l=n.n(o),r=n(60),c=n.n(r),m={components:{VueTagsInput:l.a},props:{setTimeStamp:{type:Function},getVideosTimestamp:{type:Function}},data:function(){return{currentTime:null,tag:"",tags:[],autocompleteItems:[],formattedTime:null}},asyncData:function(t){return c.a.get("/tags").then((function(t){t.data[0]&&console.log("data",t.data)})).catch((function(t){console.log("error",t)}))},methods:{addTag:function(){var t={timestamp:this.currentTime,formattedTime:this.formattedTime,tageEnd:"",tags:this.tags};this.$emit("add-tag",t)},openModal:function(){this.tags=[],this.currentTime=this.getVideosTimestamp(),!1!==this.currentTime&&(this.formattedTime=this.setTimeStamp(this.currentTime),this.$root.$emit("bv::show::modal","modal-tag"))}}},d=n(46),f={name:"VideoPlayer",props:["file"],methods:{fileToBlob:function(){if(this.file)return URL.createObjectURL(this.file)}}},h={components:{"v-tag-modal":Object(d.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-row",{staticClass:"pt-5"},[n("b-col",[n("b-button",{on:{click:function(e){return t.openModal()}}},[t._v("Add Tag's")])],1)],1),t._v(" "),n("b-modal",{attrs:{id:"modal-tag",title:"BootstrapVue"},on:{ok:t.addTag}},[n("p",{staticClass:"my-4"},[n("span",[t._v("Timestamp: "+t._s(t.formattedTime))]),t._v(" "),n("vue-tags-input",{attrs:{tags:t.tags},on:{"tags-changed":function(e){return t.tags=e}},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}})],1)])],1)}),[],!1,null,null,null).exports,"v-video-player":Object(d.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("b-col",{attrs:{cols:"12"}},[e("video",{attrs:{id:"videoPlayer",controls:"",src:this.fileToBlob(this.file)}})])}),[],!1,null,null,null).exports},data:function(){return{file:null,fileNumber:null,date:null,tapeContent:null,items:[],fields:[{key:"formattedTime",label:"Time Start","sort-desc":"false"},{key:"tagEnd",label:"Time End"},{key:"tags",label:"Tags",formatter:"tagNames"},{key:"setEnd",label:"Set End"}]}},methods:{timestamp:function(t){return t[0].timestamp},setEndTime:function(t){t.tagEnd=this.setTimeStamp(this.getVideosTimestamp()),this.$refs.tagTable.refresh(),console.log("ASD",t.tagEnd)},setTimeStamp:function(t){var e=String(Math.floor(t%60)).padStart(2,0),n=String(Math.floor(t/60%60)).padStart(2,0),o=Math.floor(t/60/60);return"".concat(o?o+":":"").concat(n,":").concat(e)},getVideosTimestamp:function(){return!!document.getElementById("videoPlayer")&&document.getElementById("videoPlayer").currentTime},tagNames:function(t){return t.map((function(t){return t.text})).join(", ")},addRowToTable:function(t){this.items.push(t)},parseFileInfo:function(t){if(!t.target.files||!t.target.files[0])return"";var e=t.target.files[0].name.split(" - ");this.fileNumber=e.shift(),this.date=e.shift(),this.tapeContent=e.join(" - ").split(".").slice(0,-1).join(".")}}},v=Object(d.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-container",[n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-form-file",{attrs:{state:Boolean(t.file),placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},on:{change:t.parseFileInfo},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1)],1),t._v(" "),n("b-row",[n("v-video-player",{attrs:{file:t.file}})],1),t._v(" "),n("b-row",[n("b-col",{staticClass:"text-center",attrs:{cols:"2"}},[t._v("Tape Number")]),t._v(" "),n("b-col",{staticClass:"text-center",attrs:{cols:"2"}},[t._v("Date")]),t._v(" "),n("b-col",{staticClass:"pl-4",attrs:{cols:"8"}},[t._v("Tape Content")])],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"2"}},[n("b-form-input",{attrs:{placeholder:"File number"},model:{value:t.fileNumber,callback:function(e){t.fileNumber=e},expression:"fileNumber"}})],1),t._v(" "),n("b-col",{attrs:{cols:"2"}},[n("b-form-input",{attrs:{placeholder:"Date"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),n("b-col",{attrs:{cols:"8"}},[n("b-form-input",{attrs:{placeholder:"Details"},model:{value:t.tapeContent,callback:function(e){t.tapeContent=e},expression:"tapeContent"}})],1)],1),t._v(" "),n("v-tag-modal",{attrs:{setTimeStamp:t.setTimeStamp,getVideosTimestamp:t.getVideosTimestamp},on:{"add-tag":t.addRowToTable}}),t._v(" "),n("b-table",{key:t.items.timestamp,ref:"tagTable",attrs:{striped:"",hover:"",fields:t.fields,items:t.items},scopedSlots:t._u([{key:"cell(formattedTime)",fn:function(data){return[t._v("\n          "+t._s(data.item.formattedTime)+"\n        ")]}},{key:"cell(tagEnd)",fn:function(data){return[t._v("\n          "+t._s(data.item.tagEnd)+"\n        ")]}},{key:"cell(tags)",fn:function(data){return[t._v("\n          "+t._s(data.value)+"\n        ")]}},{key:"cell(setEnd)",fn:function(data){return[n("b-button",{on:{click:function(e){return t.setEndTime(data.item)}}},[t._v("Tags ends at")])]}}])})],1)],1)}),[],!1,null,null,null);e.default=v.exports}}]);